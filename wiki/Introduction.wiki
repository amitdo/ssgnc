#summary Google N-gram 検索システム
#labels Phase-Requirements,Phase-Design,Featured

= はじめに =

大規模 N-gram コーパスの検索を補助するシステムであり，
Google により作成された日本語と英語のコーパスを想定しています．

== 機能 ==

Google N-gram に対して転置データベース（インデックス）を構築することにより，
unigram の AND 検索やワイルドカードを用いた検索が可能となります．

 * 検索方式
  * AND 検索
   * 「りんご」と「みかん」が出現する n-gram
  * 順序付き AND 検索
   * 「りんご」と「みかん」が順番に出現する n-gram
  * フレーズ検索
   * 「りんご」と「みかん」が続けて出現する n-gram
  * ワイルドカード検索
   * 「 `* * の よう な * *` 」（'`*`' は任意の unigram）に一致する n-gram

grep などのコマンドを併用すれば，より詳細な検索も実現できます．

※ 本システムにより構築されるインデックス自体には，
任意の unigram を含む n-gram を頻度降順に取り出す程度の能力しかありません．

----

== 動作環境 ==

Linux での利用を想定して開発しており，
64-bit 版の Ubuntu server で動作確認をしています．
サイズが 2GB を超える大きなファイルに対して mmap() を使用するため，
32-bit 版では正常に動作しません．

Mac OSX などの環境で動作するかどうかは未確認です．

----

== 用意するもの ==

本システムのビルドには，以下のツールが必要となります．

 * g++
 * make
 * libboost-dev
 * dawgdic
  * http://code.google.com/p/dawgdic/

----

= 構成 =

== インデクサ ==

圧縮された状態の Google N-gram を展開しつつ，インデックスを構築します．

 ssgnc-build-index.sh 入力ディレクトリ 出力ディレクトリ

 * 第一引数：Google N-gram の DVD に含まれるデータを展開したディレクトリ
 * 第二引数：インデックスを配置するディレクトリ

 例）ssgnc-build-index.sh ./data ./index

英語版および日本語版の Google N-gram に対してインデックスを構築した場合，
サイズは以下のようになります．
作業領域も必要となるため，200GB 以上の空き領域を確保してから
インデックスを構築するようにしてください．

 * インデックスのサイズ
  * 英語版 Google N-gram: 123GB 以下（未確認）
  * 日本語版 Google N-gram: 145GB

※ 出力されるインデックスには，Google N-gram 自体も含まれます．

----

== 検索コマンド ==

インデックスを用いて Google N-gram からの検索をおこないます．

 ssgnc-search -d DataDir

 * DataDir：インデックスのあるディレクトリ

 例）ssgnc-search -d /home/ssgnc/ja

その他のオプションについては ssgnc-search -h をご覧ください．

----

== CGI プログラム ==

CGI プログラムを生成するスクリプトが利用できます．

 ssgnc-gen-cgi.pl DataDir > CgiPerl

 * DataDir：インデックスのあるディレクトリ
 * CgiPerl：CGI プログラム

 例）ssgnc-gen-cgi.pl /home/ssgnc/ja > ssgnc-ja.pl

生成された Perl スクリプトを CGI プログラム用のディレクトリ
（/usr/lib/cgi-bin あたり）にコピーすれば使えます．

./html の中に HTML があるので，ご利用ください．
ただし，必要に応じてパスを修正する必要があります．